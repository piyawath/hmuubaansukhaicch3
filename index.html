<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏∏‡∏Ç‡πÉ‡∏à‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤ 3 - ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        body { font-family: sans-serif; background: #f7f9fc; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; width: 90%; max-width: 400px; padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.1); text-align: center; border-top: 10px solid #d4af37; }
        .profile-img { width: 80px; height: 80px; border-radius: 50%; margin-bottom: 10px; border: 3px solid #06C755; }
        .input-group { background: #fff5f5; padding: 20px; border-radius: 15px; margin: 20px 0; border: 2px dashed #e63946; }
        label { display: block; margin-bottom: 10px; color: #6c757d; font-size: 14px; }
        .input-amount { width: 80%; font-size: 28px; font-weight: bold; color: #e63946; text-align: center; border: none; background: transparent; border-bottom: 2px solid #e63946; outline: none; }
        .btn { background: #06C755; color: white; border: none; padding: 18px; width: 100%; border-radius: 15px; font-size: 18px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn:active { transform: scale(0.98); }
    </style>
</head>
<body>

<div class="container">
    <h2 style="color: #1d3557; margin-top: 0;">‡∏™‡∏∏‡∏Ç‡πÉ‡∏à‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤ 3</h2>
    <div id="loader">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
    
    <div id="content" style="display:none;">
        <img id="user-img" class="profile-img" src="" alt="Profile">
        <p>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ‡∏Ñ‡∏∏‡∏ì <span id="user-name" style="font-weight:bold;">...</span></p>
        
        <div class="input-group">
            <label>‡∏£‡∏∞‡∏ö‡∏∏‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞ (‡∏ö‡∏≤‡∏ó)</label>
            <input type="number" id="custom-amount" class="input-amount" placeholder="0.00" step="0.01">
        </div>

        <button class="btn" onclick="sendPaymentNotify()">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</button>
    </div>
</div>

<script>
    async function main() {
        // ‡πÉ‡∏ä‡πâ LIFF ID ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
        await liff.init({ liffId: "2008788483-RQ34b0zm" });

        if (liff.isLoggedIn()) {
            const profile = await liff.getProfile();
            document.getElementById('loader').style.display = 'none';
            document.getElementById('content').style.display = 'block';
            document.getElementById('user-img').src = profile.pictureUrl;
            document.getElementById('user-name').innerText = profile.displayName;
        } else {
            liff.login();
        }
    }

    async function sendPaymentNotify() {
        const amount = document.getElementById('custom-amount').value;
        
        if (!amount || amount <= 0) {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏∞‡∏ö‡∏∏‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ö");
            return;
        }

        const profile = await liff.getProfile();
        
        try {
            await liff.sendMessages([{
                type: 'text',
                text: `üí∞ ‡πÅ‡∏à‡πâ‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô (‡∏£‡∏∞‡∏ö‡∏∏‡∏¢‡∏≠‡∏î‡πÄ‡∏≠‡∏á)\nüë§ ‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á: ${profile.displayName}\nüè† ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ‡∏™‡∏∏‡∏Ç‡πÉ‡∏à‡∏ß‡∏¥‡∏•‡∏•‡πà‡∏≤ 3\nüíµ ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô: ${Number(amount).toLocaleString()} ‡∏ö‡∏≤‡∏ó\nüìÖ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà: ${new Date().toLocaleDateString('th-TH')}`
            }]);
            alert('‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
            liff.closeWindow();
        } catch (err) {
            alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏±‡∏ö');
        }
    }

    main();
</script>

</body>
</html>
